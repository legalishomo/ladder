# Shadowrocket
[General]
include = 无
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32

# --- DNS分流配置 ---
# 国内 DNS（直连规则用）
dns-direct = 223.5.5.5, 114.114.114.114
# 国外 DNS（代理规则用）
dns-proxy = 1.1.1.1, 8.8.8.8
# 主 DNS：包含分流策略
dns-server = 114.114.114.114 , 1.1.1.1, 8.8.8.8
# 当直连 DNS 失败时，不强制走代理 DNS（避免泄露）
dns-direct-fallback-proxy = false
# 使用系统 DNS（让本地解析可参与）
dns-direct-system = false
# 一些推荐选项
ipv6 = true
prefer-ipv6 = false
private-ip-answer = true
icmp-auto-reply = true
always-reject-url-rewrite = false
udp-policy-not-supported-behaviour = REJECT

[Rule]

# Block HTTP3/QUIC
# AND,((PROTOCOL,UDP),(DEST-PORT,443)),REJECT-NO-DROP

IP-CIDR,91.108.4.0/22,PROXY,no-resolve
IP-CIDR,91.108.8.0/22,PROXY,no-resolve
IP-CIDR,91.108.12.0/22,PROXY,no-resolve
IP-CIDR,91.108.16.0/22,PROXY,no-resolve
IP-CIDR,91.108.56.0/22,PROXY,no-resolve
IP-CIDR,109.239.140.0/24,PROXY,no-resolve
IP-CIDR,149.154.160.0/20,PROXY,no-resolve
IP-CIDR,2001:B28:F23D::/48,PROXY,no-resolve
IP-CIDR,2001:B28:F23F::/48,PROXY,no-resolve
IP-CIDR,2001:67C:4E8::/48,PROXY,no-resolve

# Google
DOMAIN-SUFFIX,google.com,PROXY

# DNS Leak
DOMAIN-SUFFIX,dnsleaktest.com,PROXY
DOMAIN-SUFFIX,dnsleak.com,PROXY
DOMAIN-SUFFIX,expressvpn.com,PROXY
DOMAIN-SUFFIX,nordvpn.com,PROXY
DOMAIN-SUFFIX,surfshark.com,PROXY
DOMAIN-SUFFIX,ipleak.net,PROXY
DOMAIN-SUFFIX,perfect-privacy.com,PROXY
DOMAIN-SUFFIX,browserleaks.com,PROXY
DOMAIN-SUFFIX,browserleaks.org,PROXY
DOMAIN-SUFFIX,vpnunlimited.com,PROXY
DOMAIN-SUFFIX,whoer.net,PROXY
DOMAIN-SUFFIX,whrq.net,PROXY

# LAN
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT
IP-CIDR,127.0.0.0/8,DIRECT

# China
GEOIP,CN,DIRECT

# Final
FINAL,PROXY

[Host]
localhost = 127.0.0.1

[URL Rewrite]
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302

[MITM]
ca-passphrase = Shadowrocket
ca-p12 = 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
enable = true
